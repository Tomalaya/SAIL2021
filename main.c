#pragma config(Motor,  port2,           RightWheel,    tmotorServoContinuousRotation, openLoop, reversed, driveLeft)
#pragma config(Motor,  port3,           LightpoleServo, tmotorServoStandard, openLoop)
#pragma config(Motor,  port4,           ArmMotor,      tmotorServoContinuousRotation, openLoop, reversed)
#pragma config(Motor,  port5,           HandServo,     tmotorServoStandard, openLoop)
#pragma config(Motor,  port6,           GateServo,     tmotorServoStandard, openLoop)
#pragma config(Motor,  port7,           WristServo,    tmotorServoStandard, openLoop)
#pragma config(Motor,  port8,           PlowMotor,     tmotorServoContinuousRotation, openLoop)
#pragma config(Motor,  port9,           LeftWheel,     tmotorServoContinuousRotation, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

bool autonomous = false;
float slowMode = 1.0;
int reverse = -1;

#include <buttons.c>													// Include File buttons.c
#include <arm.c>															// Include File arm.c
#include <handServo.c>												// Include File handServo.c
#include <wristServo.c>												// Include File wristServo.c
#include <auto.c>															// Include File auto.c
#include <lightpoleServo.c>
#include <plow.c>


task main()  {																	// Main Task

	int leftSpeed = 0;													// Initialize integer leftSpeed
	int rightSpeed = 0;													// Initialize integer rightSpeed
	int a2 = 0;
	int b2 = 0;
	int c2 = 0;
	int lastRightSpeed = 0;													// Initialize integer left2Speed
	int lastLeftSpeed = 0;												// Initialize integer right2Speed

	startTask(wristServoStart); 								// Start the wristServoStart Task
	startTask(handServoStart);  								// Start the handServoStart Task
	startTask(armStart);												// Start the armStart Task
	startTask(lightServoStart);									// Start lightServoStart Task
	startTask(plowMotorStart);
	startTask(autoStart);
	USEBTN(Btn8R);
	USEBTN(Ch3);
	USEBTN(Ch4);

	while(true) {															// Start a while loop
		UPDATEBTN(Btn8R);
		UPDATEBTN(Ch3);
		UPDATEBTN(Ch4);

		lastRightSpeed = rightSpeed ;
		lastLeftSpeed = leftSpeed;
		if(BTNPRESSED(Btn8R)) {
			reverse = -1 * reverse;
		}
		a2 = (abs(GETBTN(Ch3))) > 6 ? (GETBTN(Ch3)) : 0;
		a2 *= a2;
		b2 = (abs(GETBTN(Ch4))) > 6 ? (GETBTN(Ch4)) : 0;
		b2 *= b2;
		c2 = sqrt(a2 + b2);
		if(c2 < 120) {
				leftSpeed = reverse*(GETBTN(Ch3))/2 + GETBTN(Ch4)/4;
				rightSpeed = reverse*(GETBTN(Ch3))/2 - GETBTN(Ch4)/4;
			} else {
				leftSpeed = reverse*(GETBTN(Ch3)) + GETBTN(Ch4)/2;
				rightSpeed = reverse*(GETBTN(Ch3)) - GETBTN(Ch4)/2;
			}
		/*
		leftSpeed = ((abs(GETBTN(Ch3)) > 10 ? (GETBTN(Ch3)*reverse) : 0) +
								(abs(GETBTN(Ch4)) > 10 ? GETBTN(Ch4)/2:0)) * slowMode;
		rightSpeed = ((abs(GETBTN(Ch3)) > 10 ? (GETBTN(Ch3)*reverse):0) -
								 (abs(GETBTN(Ch4)) > 10 ? GETBTN(Ch4)/2:0)) * slowMode;
								 */
		if(!(autonomous)) {
			if(lastRightSpeed != rightSpeed){
				motor[RightWheel]= rightSpeed;
				}
			if(lastLeftSpeed != leftSpeed){
				motor[LeftWheel] = leftSpeed;
				}
			}
			wait1Msec(20);														// Wait 20 Milliseconds
		}
	}
